# -*- mode: rpm-spec ; mode: font-lock -*-
# $Id: $
# Authority: mok
#->---------------------------------
%define comp xray
%define _rpmdir  /u/src/apt/%{dist}/%{rel}/%{_arch}/RPMS.%{comp}
%define _srcrpmdir /u/src/apt/%{dist}/%{rel}/%{_arch}/SRPMS.%{comp}
#<----------------------------------

Summary: mox collection of jiffy programs
Name: mox
Version: @VERSION@
Release: 1%{?reltag}%{?repotag}
License: GPL
Group: Science/Crystallography
Source:	%name-%version.tar.gz
URL: http://www.bioxray.dk/~mok
BuildRoot: %{_tmppath}/%{name}-%{version}-buildroot/
BuildRequires: libcgraph
Requires: %name-libs = %epoch:%version-%release

%description
A mix of Mortens jiffies including:
<ul>
<li>qdalign -- for a quick and dirty structural alignment</li>
<li>gsreal -- translate O orientation matrices to various formats</li>
<li>pucker -- analyze the puckering of nucleic acids</li>
<li>pdb2odb -- process a pdb file to generate a file in O odb format,
separating the chains into indidual molecules. Optionally generate
macros to draw molecules</li>
</ul>

%package devel
Summary: Development environment for mox programs
Group: Science/Crystallography
Requires: %name-libs = %epoch:%version-%release
%description devel

Developement environment for mox programs. Contains libmox, a powerful
library that reads a PDB file and creates a versatile data structure.

%package libs
Summary: Shared library needed for dynamic linking of mox programs
Group: Science/Crystallography
%description libs

Shared library used by programs developed with %name-devel.

%prep
%setup -q

%build
%configure
make

%install
rm -rf %{buildroot}

%makeinstall

%clean
[ -n "%{buildroot}" -a "%{buildroot}" != / ] && rm -rf -- "%{buildroot}"

%files
%defattr(-,root,root)
%{_bindir}/qdalign
%{_bindir}/gsreal
%{_bindir}/chaincat
%{_bindir}/outlier
%{_bindir}/pdbss
%{_bindir}/polyala
%{_bindir}/pucker
%{_bindir}/rama
%{_bindir}/pdb2odb
%{_datadir}/%{name}
%{_mandir}/man1/qdalign.1*
%{_mandir}/man1/gsreal.1*
%{_mandir}/man1/pucker.1*
%{_mandir}/man1/pdb2odb.1*

%files devel
%{_includedir}/mox
%{_libdir}/libmox.a
%{_libdir}/libmox.la
%{_libdir}/libmox.so
%{_libdir}/libmox.0.so

%files libs
%{_libdir}/libmox.so.0.0.0


%changelog
* Thu Apr 26 2007 Morten Kjeldgaard <mok@ghost.bioxray.dk> - 1.3.1
- Fixed bug where the x coordinate would be parsed incorrectly 
  if the value began in field 30. 
- Reading of ATOM records now faster and less error prone. Can now 
  handle situation with no spaces between numbers. 
- I no longer convert '*' to primes in the atom names of riboses in
  nucleic acids. 
- Changes in pucker to reflect the above.
- Release as version 1.3.1

* Thu Mar 29 2007 Morten Kjeldgaard <mok@ghost.bioxray.dk> - 1.3
- Update to version 1.3. Pucker revamped. Now uses libcgraph for plotting.
- Include some more man pages.

* Fri Feb 24 2006 Morten Kjeldgaard <mok@ghost.bioxray.dk> - 1.0-1
- Added man pages and data files

* Thu Feb 23 2006 Morten Kjeldgaard <mok@ghost.bioxray.dk> - 1.0-1
- Initial packaging.

####
